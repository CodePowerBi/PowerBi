Tabla_Grafico_Con_Other =
VAR Fechas =
    DISTINCT(
        'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date]
    )
RETURN
ADDCOLUMNS(
    GENERATE(
        Fechas,
        DATATABLE(
            "divisa", STRING,
            {
                { "BRL" }, { "CLP" }, { "EUR" }, { "GBP" }, { "MXN" }, { "USD" }, { "OTHER" }
            }
        )
    ),
    "sup_def",
    VAR fechaActual = [effective_date]
    VAR total =
        CALCULATE(
            MAX('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]),
            'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "TOT",
            'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual
        )
    VAR suma6 =
        CALCULATE(
            SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]),
            'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] IN { "BRL", "CLP", "EUR", "GBP", "MXN", "USD" },
            'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual
        )
    RETURN
        SWITCH(
            [divisa],
            "BRL", CALCULATE(SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]), 'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "BRL", 'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual),
            "CLP", CALCULATE(SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]), 'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "CLP", 'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual),
            "EUR", CALCULATE(SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]), 'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "EUR", 'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual),
            "GBP", CALCULATE(SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]), 'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "GBP", 'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual),
            "MXN", CALCULATE(SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]), 'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "MXN", 'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual),
            "USD", CALCULATE(SUM('tablones_des_mrf_composition_per_currency_lcr_divisas'[sup_def]), 'tablones_des_mrf_composition_per_currency_lcr_divisas'[divisa] = "USD", 'tablones_des_mrf_composition_per_currency_lcr_divisas'[effective_date] = fechaActual),
            "OTHER", total - suma6,
            BLANK()
        )
)
