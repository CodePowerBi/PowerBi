PrimerDia_UltimoMesUltTrim_SinBuffer = 
VAR MaxFechaValida =
    CALCULATE(
        MAX( 'tablones_des_salida_buffer'[fecha] ),
        FILTER(
            ALL( 'tablones_des_salida_buffer' ),
            'tablones_des_salida_buffer'[valor] <> 0
        )
    )
VAR Mes     = MONTH( MaxFechaValida )
VAR Anio    = YEAR ( MaxFechaValida )
VAR Trime   = INT(( Mes - 1 ) / 3) + 1

// Último mes de ese mismo trimestre
VAR MesFinalTrim = 
    SWITCH(
        Trime,
        1, 3,   // Q1 → marzo
        2, 6,   // Q2 → junio
        3, 9,   // Q3 → septiembre
        4, 12   // Q4 → diciembre
    )

// Devuelve el primer día de ese mes
RETURN
DATE( Anio, MesFinalTrim, 1 )
