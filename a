Valor_Mes_Anterior_1 = 
VAR MesSeleccionado =
    IF(
        HASONEVALUE(Dates[MesAñoUltMesTrimestre]),
        VALUES(Dates[MesAñoUltMesTrimestre]),
        BLANK()
    )
VAR ListaMeses =
    FILTER(
        ALL(Dates[MesAñoUltMesTrimestre]),
        NOT(ISBLANK(Dates[MesAñoUltMesTrimestre]))
    )
VAR PosSeleccionado =
    RANKX(
        ListaMeses,
        Dates[MesAñoUltMesTrimestre],
        ,
        DESC,
        DENSE
    )
VAR MesAnterior =
    CALCULATE(
        MAX(Dates[MesAñoUltMesTrimestre]),
        FILTER(
            ListaMeses,
            RANKX(ListaMeses, Dates[MesAñoUltMesTrimestre], , DESC, DENSE) = PosSeleccionado + 1
        )
    )
RETURN
IF(
    NOT(ISBLANK(MesSeleccionado)) && NOT(ISBLANK(MesAnterior)),
    CALCULATE(
        SUM(km1[cantidad]),
        FILTER(
            ALL(Dates),
            Dates[MesAñoUltMesTrimestre] = MesAnterior
        )
    ),
    BLANK()
)
