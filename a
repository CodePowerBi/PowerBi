Valor_UltMesUltTrim = 
VAR MaxFechaValida =
    CALCULATE(
        MAX( 'tablones_des_salida_buffer'[fecha] ),
        FILTER(
            ALL( 'tablones_des_salida_buffer' ),
            'tablones_des_salida_buffer'[valor] <> 0
        )
    )

VAR MesMax         = MONTH( MaxFechaValida )
VAR AnioMax        = YEAR(  MaxFechaValida )
VAR TrimestreActual= INT(( MesMax - 1 ) / 3) + 1

// Mes de cierre de trimestre para el trimestre actual
VAR MesCierreActual = 
    SWITCH(
        TrimestreActual,
        1, 3,
        2, 6,
        3, 9,
        4, 12
    )

// ¿Está MaxFechaValida ya en mes de cierre?
VAR UsoTrimestreActual = MesMax = MesCierreActual

// Decidir trimestre y año a usar
VAR TrimestreUsar = 
    IF(
        UsoTrimestreActual,
        TrimestreActual,
        IF( TrimestreActual = 1, 4, TrimestreActual - 1 )
    )
VAR AnioUsar =
    IF(
        UsoTrimestreActual,
        AnioMax,
        IF( TrimestreActual = 1, AnioMax - 1, AnioMax )
    )

// Último mes de ese trimestre elegido
VAR MesFinalTrim = 
    SWITCH(
        TrimestreUsar,
        1, 3,
        2, 6,
        3, 9,
        4, 12
    )

VAR FechaInicio = DATE( AnioUsar, MesFinalTrim, 1 )
VAR FechaFin    = EOMONTH( FechaInicio, 0 )
VAR EstaFecha   = 'tablones_des_salida_buffer'[fecha]

RETURN
IF(
    EstaFecha >= FechaInicio &&
    EstaFecha <= FechaFin,
    EstaFecha,        // o 'valor' si quieres el valor de la fila
    BLANK()
)
