TÃ­tulo_Position_Menos_3Meses =
VAR MesSeleccionadoTexto =
    IF(
        HASONEVALUE(Dates[Trim]),
        VALUES(Dates[Trim]),
        BLANK()
    )

-- Fecha del trim seleccionado (por ejemplo 30/09/2024)
VAR FechaCorrespondiente =
    CALCULATE(
        MIN(Dates[Date]),
        FILTER(Dates, Dates[Trim] = MesSeleccionadoTexto)
    )

-- Fecha menos 3 meses (por ejemplo 30/06/2024)
VAR FechaMenos3Meses =
    EDATE(FechaCorrespondiente, -3)

-- Construimos el texto del trim de esa fecha: Jun-24, Sep-24, etc.
VAR MesMenos3 = MONTH(FechaMenos3Meses)
VAR TextoBaseMenos3 =
    LOWER(
        FORMAT(FechaMenos3Meses, "mmm")
        & "-"
        & RIGHT(FORMAT(FechaMenos3Meses, "yy"), 2)
    )

VAR TrimMenos3 =
    IF(
        MesMenos3 IN {3, 6, 9, 12},
        UPPER(LEFT(TextoBaseMenos3, 1)) &
        MID(TextoBaseMenos3, 2, LEN(TextoBaseMenos3)),
        BLANK()
    )

RETURN
IF(
    NOT ISBLANK(MesSeleccionadoTexto) && NOT ISBLANK(TrimMenos3),
    "Position " & TrimMenos3,
    "Please select a month first"
)
