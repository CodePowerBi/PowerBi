LCR_12M_Chart :=
VAR MesAnclaCodigo =
    SELECTEDVALUE ( Dates[MesAnioOrden] )

VAR MesActualCodigo =
    SELECTEDVALUE ( EjeMes_12M[MesAnioOrden] )

-- Convertir los YYYYMM en fechas reales (siempre d√≠a 1)
VAR MesAnclaFecha =
    IF (
        NOT ISBLANK ( MesAnclaCodigo ),
        DATE ( INT ( MesAnclaCodigo / 100 ), MOD ( MesAnclaCodigo, 100 ), 1 )
    )

VAR MesActualFecha =
    IF (
        NOT ISBLANK ( MesActualCodigo ),
        DATE ( INT ( MesActualCodigo / 100 ), MOD ( MesActualCodigo, 100 ), 1 )
    )

-- Ventana de 12 meses reales usando EDATE
VAR DentroVentana =
    NOT ISBLANK ( MesAnclaFecha ) &&
    NOT ISBLANK ( MesActualFecha ) &&
    MesActualFecha <= MesAnclaFecha &&
    MesActualFecha > EDATE ( MesAnclaFecha, -12 )

RETURN
IF (
    NOT DentroVentana,
    BLANK(),
    CALCULATE (
        [LCR_Base],
        REMOVEFILTERS ( Dates ),
        TREATAS ( { MesActualCodigo }, Dates[MesAnioOrden] )
    )
)
