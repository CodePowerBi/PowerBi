UK_12M =
VAR MesSlicer =
    SELECTEDVALUE ( 'MesSelector'[MesAnioOrden] )

VAR MesActualCodigo =
    SELECTEDVALUE ( EjeMes_12M[MesAnioOrden] )

VAR MesConvertido =
    IF (
        NOT ISBLANK ( MesSlicer ),
        DATE ( INT ( MesSlicer / 100 ), MOD ( MesSlicer, 100 ), 1 )
    )

VAR MesActualFecha =
    IF (
        NOT ISBLANK ( MesActualCodigo ),
        DATE ( INT ( MesActualCodigo / 100 ), MOD ( MesActualCodigo, 100 ), 1 )
    )

VAR DentroVentana =
    NOT ISBLANK ( MesConvertido )
        && NOT ISBLANK ( MesActualFecha )
        && MesActualFecha <= MesConvertido
        && MesActualFecha > EDATE ( MesConvertido, -12 )

RETURN
IF (
    NOT DentroVentana,
    BLANK (),
    CALCULATE (
        SUM ( lcr_historico[brazil] ),

        -- Siempre la Ãºltima carga por cada 'fecha' (mes)
        KEEPFILTERS ( lcr_historico[true_effective_date] = TRUE () ),

        -- Aplicamos el mes del eje sobre la columna 'fecha'
        KEEPFILTERS (
            FILTER (
                ALL ( lcr_historico[fecha] ),
                lcr_historico[fecha] >= MesActualFecha
                    && lcr_historico[fecha] < EOMONTH ( MesActualFecha, 0 ) + 1
            )
        )
    )
)
