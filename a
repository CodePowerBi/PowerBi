Max_FechaTrimCerrado =
VAR FechaMaxConDatos =
    CALCULATE(
        MAX ( 'Dates'[Date] ),
        FILTER( ALL ( 'salida_buffer_vw' ), 'salida_buffer_vw'[valor] <> 0 )
    )
-- límite: no usar nunca el mes en curso; solo hasta el último mes cerrado
VAR FechaMaxCerrada = MIN ( FechaMaxConDatos, EOMONTH ( TODAY(), -1 ) )

VAR Mes = MONTH ( FechaMaxCerrada )
VAR Anio = YEAR ( FechaMaxCerrada )
VAR Trim = INT ( ( Mes - 1 ) / 3 ) + 1

-- si no es fin de trimestre (3,6,9,12) retrocede 1 trimestre
VAR TrimAUsar = IF ( Mes IN { 3, 6, 9, 12 }, Trim, Trim - 1 )
VAR AnioAUsar = IF ( TrimAUsar = 0, Anio - 1, Anio )
VAR TrimFinal  = IF ( TrimAUsar = 0, 4, TrimAUsar )

VAR MesFinTrim =
    SWITCH ( TrimFinal, 1, 3, 2, 6, 3, 9, 4, 12 )

-- fechas del trimestre cerrado
VAR FechaInicioTrim = DATE ( AnioAUsar, MesFinTrim - 2, 1 )
VAR FechaFinTrim    = EOMONTH ( DATE ( AnioAUsar, MesFinTrim, 1 ), 0 )

RETURN
    FechaFinTrim        -- o devuelve FechaInicioTrim si prefieres el primer día
